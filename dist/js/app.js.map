{"version":3,"sources":["app/app.js","app/config/config-firebase.js","app/config/config-routes.js","app/modules/home/home-controller.js","app/modules/home/index.js","app/modules/index.js"],"names":["initializeApp","AppConfig","$urlProvider","$locationProvider","$firebaseRefProvider","$BaseAppsStateProvider","otherwise","html5Mode","enabled","requireBase","registerUrl","databaseURL","registerDynamicRoutes","$inject","AppRun","FastClick","attach","document","body","module","concat","config","run","exports","apiKey","authDomain","storageBucket","messagingSenderId","HomeController","$firebaseRef","$firebaseAuth","$firebaseArray","$timeout","$q","authService","auth","authLoaded","totalClicks","totalUsers","lastClicked","data","default","child","reportingService","firebase","$requireSignIn","then","init","catch","$signInAnonymously","piechart","type","label","options","legend","position","linecharts","minute","title","hour","day","week","initReportingService","$watch","draw","button","uid","$getAuth","timestamp","database","ServerValue","TIMESTAMP","anyclicked","saveMetrics","$add","filter","sum","select","values","count","value","last","drawMetrics","drawPieChart","drawLineChart","aClickedQuery","bClickedQuery","cClickedQuery","dClickedQuery","all","rows","splice","length","push","c","v","during","queryStartTime","Date","queryEndTime","setMilliseconds","setSeconds","setMinutes","setTime","getTime","setHours","getHours","setDate","getDate","setMonth","getMonth","setFullYear","getFullYear","range","i","addFilter","addMetric","enableRetainer","angular","controller","name"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;;;;AACA;;;;AACA;;AACA;;AAGA;;;;AACA;;AACA;;;;AAIA;;AACA;;AACA;;AAGA;;AACA;;AACA;;;;AAGA;;;;;;AAbA,mBAASA,aAAT;;AAEA;;;AANA;AANA;;;AAiBA;;;AAKA;;;AAGA,IAAMC,YAAY,SAAZA,SAAY,CAACC,YAAD,EAAeC,iBAAf,EAAkCC,oBAAlC,EAAwDC,sBAAxD,EAAmF;AACnGH,eAAaI,SAAb,CAAuB,GAAvB;;AAEAH,oBAAkBI,SAAlB,CAA4B;AAC1BC,aAAS,IADiB;AAE1BC,iBAAa;AAFa,GAA5B;;AAKAL,uBAAqBM,WAArB,CAAiC,yBAAeC,WAAhD;;AAEAN,yBAAuBO,qBAAvB;AACD,CAXD;;AAaAX,UAAUY,OAAV,GAAoB,CAAC,oBAAD,EAAuB,mBAAvB,EAA4C,sBAA5C,EAAoE,wBAApE,CAApB;;AAEA,IAAMC,SAAS,SAATA,MAAS,GAAM;AACnB,sBAAGC,SAAH,CAAaC,MAAb,CAAoBC,SAASC,IAA7B;AACD,CAFD;;AAIA,kBAAQC,MAAR,CAAe,aAAf,EAA8B,CAC5B,WAD4B,EAE5B,WAF4B;;AAI5B;AACA,UAL4B;;AAO5B;AACA,MAR4B;;AAU5B;AACA,aAX4B;;AAa5B;AACA,yBAd4B,EAe5B,uBAf4B,EAgB5B,4BAhB4B;;AAkB5B;AACA,gBAnB4B,EAoB5B,2BApB4B,EAqB5BC,MArB4B,mBAA9B,EAsBCC,MAtBD,CAsBQpB,SAtBR,EAuBCqB,GAvBD,CAuBKR,MAvBL;;;;;;AC5CAK,OAAOI,OAAP,GAAiB;AACfC,UAAQ,yCADO;AAEfC,cAAY,uCAFG;AAGfd,eAAa,8CAHE;AAIfe,iBAAe,mCAJA;AAKfC,qBAAmB;AALJ,CAAjB;;;;;;ACCER,OAAOI,OAAP,GAAiB,CAAC,EAAC,QAAO,MAAR,EAAe,OAAM,GAArB,EAAyB,cAAa,wBAAtC,EAA+D,QAAO,wBAAtE,EAAD,CAAjB;;;;;;;;;;;;ACDF;;;;AACA;;;;;;;;IAEqBK,c;AACnB,0BAAYC,YAAZ,EAA0BC,aAA1B,EAAyCC,cAAzC,EAAyDC,QAAzD,EAAmEC,EAAnE,EAAuE;AAAA;;AAAA;;AACrE,SAAKC,WAAL,GAAmBJ,cAAc,mBAASK,IAAT,EAAd,CAAnB;AACA,SAAKH,QAAL,GAAgBA,QAAhB;AACA,SAAKC,EAAL,GAAUA,EAAV;AACA,SAAKG,UAAL,GAAkB,KAAlB;AACA,SAAKC,WAAL,GAAmB,IAAnB;AACA,SAAKC,UAAL,GAAkB,IAAlB;AACA,SAAKC,WAAL,GAAmB,IAAnB;AACA,SAAKC,IAAL,GAAYT,eAAeF,aAAaY,OAAb,CAAqBC,KAArB,CAA2B,MAA3B,CAAf,CAAZ;AACA,SAAKC,gBAAL,GAAwB,gCAAsB;AAC5CC,gBAAUf,aAAaY,OAAb,CAAqBC,KAArB,CAA2B,WAA3B;AADkC,KAAtB,CAAxB;;AAIA,SAAKR,WAAL,CAAiBW,cAAjB,GACGC,IADH,CACQ;AAAA,aAAM,MAAKC,IAAL,EAAN;AAAA,KADR,EAEGC,KAFH,CAES;AAAA,aAAM,MAAKd,WAAL,CAAiBe,kBAAjB,GAAsCH,IAAtC,CAA2C;AAAA,eAAM,MAAKC,IAAL,EAAN;AAAA,OAA3C,CAAN;AAAA,KAFT;;AAIA,SAAKG,QAAL,GAAgB;AACdC,YAAM,UADQ;AAEdX,YAAM;AACJ,gBAAQ,CACN,EAACY,OAAO,QAAR,EAAkBD,MAAM,QAAxB,EADM,EAEN,EAACC,OAAO,eAAR,EAAyBD,MAAM,QAA/B,EAFM,CADJ;AAKJ,gBAAQ;AALJ,OAFQ;AASdE,eAAS;AACPC,gBAAQ;AACNC,oBAAU;AADJ;AADD;AATK,KAAhB;AAeA,SAAKC,UAAL,GAAkB,EAAlB;AACA,SAAKA,UAAL,CAAgBC,MAAhB,GAAyB;AACvBN,YAAM,WADiB;AAEvBX,YAAM;AACJ,gBAAQ,CACN,EAACY,OAAO,MAAR,EAAgBD,MAAM,MAAtB,EADM,EAEN,EAACC,OAAO,GAAR,EAAaD,MAAM,QAAnB,EAFM,EAGN,EAACC,OAAO,GAAR,EAAaD,MAAM,QAAnB,EAHM,EAIN,EAACC,OAAO,GAAR,EAAaD,MAAM,QAAnB,EAJM,EAKN,EAACC,OAAO,GAAR,EAAaD,MAAM,QAAnB,EALM,CADJ;AAQJ,gBAAQ;AARJ,OAFiB;AAYvBE,eAAS;AACPK,eAAO,mBADA;AAEPJ,gBAAQ;AACNC,oBAAU;AADJ;AAFD;AAZc,KAAzB;AAmBA,SAAKC,UAAL,CAAgBG,IAAhB,GAAuB;AACrBR,YAAM,WADe;AAErBX,YAAM;AACJ,gBAAQ,CACN,EAACY,OAAO,MAAR,EAAgBD,MAAM,MAAtB,EADM,EAEN,EAACC,OAAO,GAAR,EAAaD,MAAM,QAAnB,EAFM,EAGN,EAACC,OAAO,GAAR,EAAaD,MAAM,QAAnB,EAHM,EAIN,EAACC,OAAO,GAAR,EAAaD,MAAM,QAAnB,EAJM,EAKN,EAACC,OAAO,GAAR,EAAaD,MAAM,QAAnB,EALM,CADJ;AAQJ,gBAAQ;AARJ,OAFe;AAYrBE,eAAS;AACPK,eAAO,eADA;AAEPJ,gBAAQ;AACNC,oBAAU;AADJ;AAFD;AAZY,KAAvB;AAmBA,SAAKC,UAAL,CAAgBI,GAAhB,GAAsB;AACpBT,YAAM,WADc;AAEpBX,YAAM;AACJ,gBAAQ,CACN,EAACY,OAAO,MAAR,EAAgBD,MAAM,MAAtB,EADM,EAEN,EAACC,OAAO,GAAR,EAAaD,MAAM,QAAnB,EAFM,EAGN,EAACC,OAAO,GAAR,EAAaD,MAAM,QAAnB,EAHM,EAIN,EAACC,OAAO,GAAR,EAAaD,MAAM,QAAnB,EAJM,EAKN,EAACC,OAAO,GAAR,EAAaD,MAAM,QAAnB,EALM,CADJ;AAQJ,gBAAQ;AARJ,OAFc;AAYpBE,eAAS;AACPK,eAAO,oBADA;AAEPJ,gBAAQ;AACNC,oBAAU;AADJ;AAFD;AAZW,KAAtB;AAmBA,SAAKC,UAAL,CAAgBK,IAAhB,GAAuB;AACrBV,YAAM,WADe;AAErBX,YAAM;AACJ,gBAAQ,CACN,EAACY,OAAO,MAAR,EAAgBD,MAAM,MAAtB,EADM,EAEN,EAACC,OAAO,GAAR,EAAaD,MAAM,QAAnB,EAFM,EAGN,EAACC,OAAO,GAAR,EAAaD,MAAM,QAAnB,EAHM,EAIN,EAACC,OAAO,GAAR,EAAaD,MAAM,QAAnB,EAJM,EAKN,EAACC,OAAO,GAAR,EAAaD,MAAM,QAAnB,EALM,CADJ;AAQJ,gBAAQ;AARJ,OAFe;AAYrBE,eAAS;AACPK,eAAO,mBADA;AAEPJ,gBAAQ;AACNC,oBAAU;AADJ;AAFD;AAZY,KAAvB;;AAoBA,WAAO,IAAP;AACD;;;;2BAEM;AAAA;;AACL,WAAKnB,UAAL,GAAkB,IAAlB;AACA,WAAK0B,oBAAL;AACA,WAAKtB,IAAL,CAAUuB,MAAV,CAAiB;AAAA,eAAM,OAAKC,IAAL,EAAN;AAAA,OAAjB;AACA,WAAKA,IAAL;AACD;;;kCAEaC,M,EAAQ;AAAA;;AACpB,UAAMzB,OAAO;AACX0B,aAAK,KAAKhC,WAAL,CAAiBiC,QAAjB,GAA4BD,GADtB;AAEXE,mBAAW,mBAASC,QAAT,CAAkBC,WAAlB,CAA8BC,SAF9B;AAGXC,oBAAY;AAHD,OAAb;AAKAhC,WAAKyB,SAAS,SAAd,IAA2B,CAA3B;;AAEA;AACA;AACA,WAAKtB,gBAAL,CAAsB8B,WAAtB,CAAkCjC,IAAlC,EAAwCM,IAAxC,CAA6C,YAAM;AACjD,eAAKN,IAAL,CAAUkC,IAAV,CAAelC,IAAf;AACD,OAFD;AAGD;;;kCAEa;AAAA;;AACZ,WAAKG,gBAAL,CAAsBgC,MAAtB,GAA+BC,GAA/B,CAAmC,YAAnC,EAAiDC,MAAjD,CAAwD,CAAxD,EAA2D/B,IAA3D,CAAgE,UAACgC,MAAD,EAAY;AAC1E,eAAK9C,QAAL,CAAc;AAAA,iBAAM,OAAKK,WAAL,GAAmByC,OAAO,CAAP,KAAa,CAAtC;AAAA,SAAd;AACD,OAFD;AAGA,WAAKnC,gBAAL,CAAsBgC,MAAtB,CAA6B,OAA7B,EAAsCC,GAAtC,CAA0C,YAA1C,EAAwDG,KAAxD,GAAgEjC,IAAhE,CAAqE,UAACkC,KAAD,EAAW;AAC9E,eAAKhD,QAAL,CAAc;AAAA,iBAAM,OAAKM,UAAL,GAAkB0C,SAAS,CAAjC;AAAA,SAAd;AACD,OAFD;AAGA,WAAKrC,gBAAL,CAAsBgC,MAAtB,GAA+BM,IAA/B,CAAoC,WAApC,EAAiDJ,MAAjD,CAAwD,CAAxD,EAA2D/B,IAA3D,CAAgE,UAACgC,MAAD,EAAY;AAC1E,eAAK9C,QAAL,CAAc;AAAA,iBAAM,OAAKO,WAAL,GAAmBuC,OAAO,CAAP,IAAYA,OAAO,CAAP,CAAZ,GAAwB,IAAjD;AAAA,SAAd;AACD,OAFD;AAGD;;;2BAEM;AACL,WAAKI,WAAL;AACA,WAAKC,YAAL;AACA,WAAKC,aAAL,CAAmB,QAAnB;AACA,WAAKA,aAAL,CAAmB,MAAnB;AACA,WAAKA,aAAL,CAAmB,KAAnB;AACA,WAAKA,aAAL,CAAmB,MAAnB;AACD;;;mCAEc;AAAA;;AACb,UAAMC,gBAAgB,KAAK1C,gBAAL,CAAsBgC,MAAtB,GAA+BC,GAA/B,CAAmC,UAAnC,EAA+CI,KAA/C,EAAtB;AACA,UAAMM,gBAAgB,KAAK3C,gBAAL,CAAsBgC,MAAtB,GAA+BC,GAA/B,CAAmC,UAAnC,EAA+CI,KAA/C,EAAtB;AACA,UAAMO,gBAAgB,KAAK5C,gBAAL,CAAsBgC,MAAtB,GAA+BC,GAA/B,CAAmC,UAAnC,EAA+CI,KAA/C,EAAtB;AACA,UAAMQ,gBAAgB,KAAK7C,gBAAL,CAAsBgC,MAAtB,GAA+BC,GAA/B,CAAmC,UAAnC,EAA+CI,KAA/C,EAAtB;;AAEA,WAAK/C,EAAL,CAAQwD,GAAR,CAAY,CAACJ,aAAD,EAAgBC,aAAhB,EAA+BC,aAA/B,EAA8CC,aAA9C,CAAZ,EAA0E1C,IAA1E,CAA+E,UAACgC,MAAD,EAAY;AACzF,eAAK9C,QAAL,CAAc,YAAM;AAClB,iBAAKkB,QAAL,CAAcV,IAAd,CAAmBkD,IAAnB,CAAwBC,MAAxB,CAA+B,CAA/B,EAAkC,OAAKzC,QAAL,CAAcV,IAAd,CAAmBkD,IAAnB,CAAwBE,MAA1D;AACA,iBAAK1C,QAAL,CAAcV,IAAd,CAAmBkD,IAAnB,CAAwBG,IAAxB,CAA6B,EAAEC,GAAG,CAAC,EAAEC,GAAG,GAAL,EAAD,EAAa,EAACA,GAAGjB,OAAO,CAAP,CAAJ,EAAb,CAAL,EAA7B;AACA,iBAAK5B,QAAL,CAAcV,IAAd,CAAmBkD,IAAnB,CAAwBG,IAAxB,CAA6B,EAAEC,GAAG,CAAC,EAAEC,GAAG,GAAL,EAAD,EAAa,EAACA,GAAGjB,OAAO,CAAP,CAAJ,EAAb,CAAL,EAA7B;AACA,iBAAK5B,QAAL,CAAcV,IAAd,CAAmBkD,IAAnB,CAAwBG,IAAxB,CAA6B,EAAEC,GAAG,CAAC,EAAEC,GAAG,GAAL,EAAD,EAAa,EAACA,GAAGjB,OAAO,CAAP,CAAJ,EAAb,CAAL,EAA7B;AACA,iBAAK5B,QAAL,CAAcV,IAAd,CAAmBkD,IAAnB,CAAwBG,IAAxB,CAA6B,EAAEC,GAAG,CAAC,EAAEC,GAAG,GAAL,EAAD,EAAa,EAACA,GAAGjB,OAAO,CAAP,CAAJ,EAAb,CAAL,EAA7B;AACD,SAND;AAOD,OARD;AASD;;;kCAEakB,M,EAAQ;AAAA;;AACpB,UAAMC,iBAAiB,IAAIC,IAAJ,EAAvB;AACA,UAAMC,eAAe,IAAID,IAAJ,EAArB;AACAD,qBAAeG,eAAf,CAA+B,CAA/B;AACAH,qBAAeI,UAAf,CAA0B,CAA1B;AACAJ,qBAAeK,UAAf,CAA0B,CAA1B;;AAEA,cAAQN,MAAR;AACE,aAAK,QAAL;AACEG,uBAAaI,OAAb,CAAqBN,eAAeO,OAAf,EAArB;AACAL,uBAAaM,QAAb,CAAsBR,eAAeS,QAAf,KAA4B,CAAlD;AACA;AACF,aAAK,MAAL;AACET,yBAAeQ,QAAf,CAAwB,CAAxB;AACAN,uBAAaI,OAAb,CAAqBN,eAAeO,OAAf,EAArB;AACAL,uBAAaQ,OAAb,CAAqBV,eAAeW,OAAf,KAA2B,CAAhD;AACA;AACF,aAAK,KAAL;AACEX,yBAAeQ,QAAf,CAAwB,CAAxB;AACAR,yBAAeU,OAAf,CAAuB,CAAvB;AACAR,uBAAaI,OAAb,CAAqBN,eAAeO,OAAf,EAArB;AACAL,uBAAaU,QAAb,CAAsBZ,eAAea,QAAf,KAA4B,CAAlD;AACA;AACF,aAAK,MAAL;AACEb,yBAAeQ,QAAf,CAAwB,CAAxB;AACAR,yBAAeU,OAAf,CAAuB,CAAvB;AACAV,yBAAeY,QAAf,CAAwB,CAAxB;AACAV,uBAAaI,OAAb,CAAqBN,eAAeO,OAAf,EAArB;AACAL,uBAAaY,WAAb,CAAyBd,eAAee,WAAf,KAA+B,CAAxD;AACA;AAtBJ;;AAyBA,UAAM3B,gBAAgB,KAAK1C,gBAAL,CAAsBgC,MAAtB,GAA+BC,GAA/B,CAAmC,UAAnC,EAA+CoB,MAA/C,CAAsDA,MAAtD,EAA8DiB,KAA9D,CAAoEhB,eAAeO,OAAf,EAApE,EAA8FL,aAAaK,OAAb,EAA9F,EAAsH1B,MAAtH,CAA6H,IAA7H,CAAtB;AACA,UAAMQ,gBAAgB,KAAK3C,gBAAL,CAAsBgC,MAAtB,GAA+BC,GAA/B,CAAmC,UAAnC,EAA+CoB,MAA/C,CAAsDA,MAAtD,EAA8DiB,KAA9D,CAAoEhB,eAAeO,OAAf,EAApE,EAA8FL,aAAaK,OAAb,EAA9F,EAAsH1B,MAAtH,CAA6H,IAA7H,CAAtB;AACA,UAAMS,gBAAgB,KAAK5C,gBAAL,CAAsBgC,MAAtB,GAA+BC,GAA/B,CAAmC,UAAnC,EAA+CoB,MAA/C,CAAsDA,MAAtD,EAA8DiB,KAA9D,CAAoEhB,eAAeO,OAAf,EAApE,EAA8FL,aAAaK,OAAb,EAA9F,EAAsH1B,MAAtH,CAA6H,IAA7H,CAAtB;AACA,UAAMU,gBAAgB,KAAK7C,gBAAL,CAAsBgC,MAAtB,GAA+BC,GAA/B,CAAmC,UAAnC,EAA+CoB,MAA/C,CAAsDA,MAAtD,EAA8DiB,KAA9D,CAAoEhB,eAAeO,OAAf,EAApE,EAA8FL,aAAaK,OAAb,EAA9F,EAAsH1B,MAAtH,CAA6H,IAA7H,CAAtB;;AAEA,WAAK7C,EAAL,CAAQwD,GAAR,CAAY,CAACJ,aAAD,EAAgBC,aAAhB,EAA+BC,aAA/B,EAA8CC,aAA9C,CAAZ,EAA0E1C,IAA1E,CAA+E,UAACgC,MAAD,EAAY;AACzF,eAAKtB,UAAL,CAAgBwC,MAAhB,EAAwBxD,IAAxB,CAA6BkD,IAA7B,CAAkCC,MAAlC,CAAyC,CAAzC,EAA4C,OAAKnC,UAAL,CAAgBwC,MAAhB,EAAwBxD,IAAxB,CAA6BkD,IAA7B,CAAkCE,MAA9E;AACA,aAAK,IAAIsB,IAAI,CAAb,EAAgBA,IAAIpC,OAAO,CAAP,EAAUc,MAA9B,EAAsCsB,GAAtC,EAA2C;AACzC,iBAAK1D,UAAL,CAAgBwC,MAAhB,EAAwBxD,IAAxB,CAA6BkD,IAA7B,CAAkCG,IAAlC,CAAuC;AACrCC,eAAG,CAAC;AACFC,iBAAG,IAAIG,IAAJ,CAASpB,OAAO,CAAP,EAAUoC,CAAV,EAAa9C,SAAtB;AADD,aAAD,EAEA;AACD2B,iBAAGjB,OAAO,CAAP,EAAUoC,CAAV,EAAalC;AADf,aAFA,EAIA;AACDe,iBAAGjB,OAAO,CAAP,EAAUoC,CAAV,EAAalC;AADf,aAJA,EAMA;AACDe,iBAAGjB,OAAO,CAAP,EAAUoC,CAAV,EAAalC;AADf,aANA,EAQA;AACDe,iBAAGjB,OAAO,CAAP,EAAUoC,CAAV,EAAalC;AADf,aARA;AADkC,WAAvC;AAaD;AACF,OAjBD;AAkBD;;;2CAEsB;AACrB;AACA,WAAKrC,gBAAL,CAAsBwE,SAAtB,CAAgC,OAAhC,EAAyC,CAAC,KAAD,CAAzC;;AAEA;AACA,WAAKxE,gBAAL,CAAsByE,SAAtB,CAAgC,WAAhC,EAA6C,CAAC,OAAD,EAAU,MAAV,CAA7C;;AAEA;AACA,WAAKzE,gBAAL,CAAsByE,SAAtB,CAAgC,YAAhC,EAA8C,CAAC,KAAD,CAA9C;AACA,WAAKzE,gBAAL,CAAsB0E,cAAtB,CAAqC,QAArC,EAA+C,YAA/C,EAA6D,CAAC,KAAD,CAA7D;AACA,WAAK1E,gBAAL,CAAsB0E,cAAtB,CAAqC,MAArC,EAA6C,YAA7C,EAA2D,CAAC,KAAD,CAA3D;AACA,WAAK1E,gBAAL,CAAsB0E,cAAtB,CAAqC,KAArC,EAA4C,YAA5C,EAA0D,CAAC,KAAD,CAA1D;AACA,WAAK1E,gBAAL,CAAsB0E,cAAtB,CAAqC,MAArC,EAA6C,YAA7C,EAA2D,CAAC,KAAD,CAA3D;;AAEA;AACA,WAAK1E,gBAAL,CAAsByE,SAAtB,CAAgC,UAAhC,EAA4C,CAAC,KAAD,CAA5C;AACA,WAAKzE,gBAAL,CAAsB0E,cAAtB,CAAqC,QAArC,EAA+C,UAA/C,EAA2D,CAAC,KAAD,CAA3D;AACA,WAAK1E,gBAAL,CAAsB0E,cAAtB,CAAqC,MAArC,EAA6C,UAA7C,EAAyD,CAAC,KAAD,CAAzD;AACA,WAAK1E,gBAAL,CAAsB0E,cAAtB,CAAqC,KAArC,EAA4C,UAA5C,EAAwD,CAAC,KAAD,CAAxD;AACA,WAAK1E,gBAAL,CAAsB0E,cAAtB,CAAqC,MAArC,EAA6C,UAA7C,EAAyD,CAAC,KAAD,CAAzD;;AAEA;AACA,WAAK1E,gBAAL,CAAsByE,SAAtB,CAAgC,UAAhC,EAA4C,CAAC,KAAD,CAA5C;AACA,WAAKzE,gBAAL,CAAsB0E,cAAtB,CAAqC,QAArC,EAA+C,UAA/C,EAA2D,CAAC,KAAD,CAA3D;AACA,WAAK1E,gBAAL,CAAsB0E,cAAtB,CAAqC,MAArC,EAA6C,UAA7C,EAAyD,CAAC,KAAD,CAAzD;AACA,WAAK1E,gBAAL,CAAsB0E,cAAtB,CAAqC,KAArC,EAA4C,UAA5C,EAAwD,CAAC,KAAD,CAAxD;AACA,WAAK1E,gBAAL,CAAsB0E,cAAtB,CAAqC,MAArC,EAA6C,UAA7C,EAAyD,CAAC,KAAD,CAAzD;;AAEA;AACA,WAAK1E,gBAAL,CAAsByE,SAAtB,CAAgC,UAAhC,EAA4C,CAAC,KAAD,CAA5C;AACA,WAAKzE,gBAAL,CAAsB0E,cAAtB,CAAqC,QAArC,EAA+C,UAA/C,EAA2D,CAAC,KAAD,CAA3D;AACA,WAAK1E,gBAAL,CAAsB0E,cAAtB,CAAqC,MAArC,EAA6C,UAA7C,EAAyD,CAAC,KAAD,CAAzD;AACA,WAAK1E,gBAAL,CAAsB0E,cAAtB,CAAqC,KAArC,EAA4C,UAA5C,EAAwD,CAAC,KAAD,CAAxD;AACA,WAAK1E,gBAAL,CAAsB0E,cAAtB,CAAqC,MAArC,EAA6C,UAA7C,EAAyD,CAAC,KAAD,CAAzD;;AAEA;AACA,WAAK1E,gBAAL,CAAsByE,SAAtB,CAAgC,UAAhC,EAA4C,CAAC,KAAD,CAA5C;AACA,WAAKzE,gBAAL,CAAsB0E,cAAtB,CAAqC,QAArC,EAA+C,UAA/C,EAA2D,CAAC,KAAD,CAA3D;AACA,WAAK1E,gBAAL,CAAsB0E,cAAtB,CAAqC,MAArC,EAA6C,UAA7C,EAAyD,CAAC,KAAD,CAAzD;AACA,WAAK1E,gBAAL,CAAsB0E,cAAtB,CAAqC,KAArC,EAA4C,UAA5C,EAAwD,CAAC,KAAD,CAAxD;AACA,WAAK1E,gBAAL,CAAsB0E,cAAtB,CAAqC,MAArC,EAA6C,UAA7C,EAAyD,CAAC,KAAD,CAAzD;AACD;;;;;;kBAhRkBzF,c;;;AAmRrBA,eAAef,OAAf,GAAyB,CAAC,cAAD,EAAiB,eAAjB,EAAkC,gBAAlC,EAAoD,UAApD,EAAgE,IAAhE,CAAzB;;;;;;;;;;ACtRA;;;;;;kBAEeyG,QAAQnG,MAAR,CAAe,kBAAf,EAAmC,CAAC,mBAAD,CAAnC,EACZoG,UADY,CACD,gBADC,4BAEZC,I;;;;;;ACJH;;AAEArG,OAAOI,OAAP,GAAiB,CACf,kBADe,CAAjB","file":"public/js/app.js","sourcesContent":["// Angular Base Apps Configuration\nimport fs from 'fastclick';\nimport angular from 'angular';\nimport 'angular-base-apps';\nimport 'angular-google-chart/ng-google-chart';\n\n// Firebase Configuration\nimport firebase from 'firebase';\nimport 'angularfire';\nimport firebaseconfig from './config/config-firebase';\nfirebase.initializeApp(firebaseconfig);\n\n// Icon Configuration\nimport 'angular-icons/dist/open-iconic';\nimport 'angular-icons/dist/ionicons';\nimport 'angular-icons/dist/material-icons';\n\n// Route Configuration\nimport 'angular-dynamic-routing/dynamicRouting';\nimport 'angular-dynamic-routing/dynamicRouting.animations';\nimport routeconfig from './config/config-routes';\n\n// Application Configuration\nimport moduleconfig from './modules';\n\nconst AppConfig = ($urlProvider, $locationProvider, $firebaseRefProvider, $BaseAppsStateProvider) => {\n  $urlProvider.otherwise('/');\n\n  $locationProvider.html5Mode({\n    enabled: true,\n    requireBase: false\n  });\n\n  $firebaseRefProvider.registerUrl(firebaseconfig.databaseURL);\n\n  $BaseAppsStateProvider.registerDynamicRoutes(routeconfig);\n};\n\nAppConfig.$inject = ['$urlRouterProvider', '$locationProvider', '$firebaseRefProvider', '$BaseAppsStateProvider'];\n\nconst AppRun = () => {\n  fs.FastClick.attach(document.body);\n};\n\nangular.module('application', [\n  'ui.router',\n  'ngAnimate',\n\n  // firebase\n  'firebase',\n\n  // base apps\n  'base',\n\n  // google charts\n  'googlechart',\n\n  // icons\n  'angularIcons.openIconic',\n  'angularIcons.ionicons',\n  'angularIcons.materialIcons',\n\n  // dynamic routing\n  'dynamicRouting',\n  'dynamicRouting.animations'\n].concat(moduleconfig))\n.config(AppConfig)\n.run(AppRun);\n","module.exports = {\n  apiKey: 'AIzaSyBY48PLnCREEFM9h7m7E0YwuhuBlbPuuXU',\n  authDomain: 'fir-reporting-angular.firebaseapp.com',\n  databaseURL: 'https://fir-reporting-angular.firebaseio.com',\n  storageBucket: 'fir-reporting-angular.appspot.com',\n  messagingSenderId: '1063292915498'\n};\n","\n  module.exports = [{\"name\":\"home\",\"url\":\"/\",\"controller\":\"HomeController as home\",\"path\":\"modules/home/home.html\"}];\n  ","import FirebaseReporting from 'firebase-reporting';\nimport firebase from 'firebase';\n\nexport default class HomeController {\n  constructor($firebaseRef, $firebaseAuth, $firebaseArray, $timeout, $q) {\n    this.authService = $firebaseAuth(firebase.auth());\n    this.$timeout = $timeout;\n    this.$q = $q;\n    this.authLoaded = false;\n    this.totalClicks = null;\n    this.totalUsers = null;\n    this.lastClicked = null;\n    this.data = $firebaseArray($firebaseRef.default.child('data'));\n    this.reportingService = new FirebaseReporting({\n      firebase: $firebaseRef.default.child('reporting')\n    });\n\n    this.authService.$requireSignIn()\n      .then(() => this.init())\n      .catch(() => this.authService.$signInAnonymously().then(() => this.init()));\n\n    this.piechart = {\n      type: 'PieChart',\n      data: {\n        'cols': [\n          {label: 'Button', type: 'string'},\n          {label: 'Times Clicked', type: 'number'}\n        ],\n        'rows': []\n      },\n      options: {\n        legend: {\n          position: 'bottom'\n        }\n      }\n    };\n    this.linecharts = {};\n    this.linecharts.minute = {\n      type: 'LineChart',\n      data: {\n        'cols': [\n          {label: 'Time', type: 'date'},\n          {label: 'A', type: 'number'},\n          {label: 'B', type: 'number'},\n          {label: 'C', type: 'number'},\n          {label: 'D', type: 'number'}\n        ],\n        'rows': []\n      },\n      options: {\n        title: 'Clicked this Hour',\n        legend: {\n          position: 'bottom'\n        }\n      }\n    };\n    this.linecharts.hour = {\n      type: 'LineChart',\n      data: {\n        'cols': [\n          {label: 'Time', type: 'date'},\n          {label: 'A', type: 'number'},\n          {label: 'B', type: 'number'},\n          {label: 'C', type: 'number'},\n          {label: 'D', type: 'number'}\n        ],\n        'rows': []\n      },\n      options: {\n        title: 'Clicked Today',\n        legend: {\n          position: 'bottom'\n        }\n      }\n    };\n    this.linecharts.day = {\n      type: 'LineChart',\n      data: {\n        'cols': [\n          {label: 'Time', type: 'date'},\n          {label: 'A', type: 'number'},\n          {label: 'B', type: 'number'},\n          {label: 'C', type: 'number'},\n          {label: 'D', type: 'number'}\n        ],\n        'rows': []\n      },\n      options: {\n        title: 'Clicked this Month',\n        legend: {\n          position: 'bottom'\n        }\n      }\n    };\n    this.linecharts.week = {\n      type: 'LineChart',\n      data: {\n        'cols': [\n          {label: 'Time', type: 'date'},\n          {label: 'A', type: 'number'},\n          {label: 'B', type: 'number'},\n          {label: 'C', type: 'number'},\n          {label: 'D', type: 'number'}\n        ],\n        'rows': []\n      },\n      options: {\n        title: 'Clicked this Year',\n        legend: {\n          position: 'bottom'\n        }\n      }\n    };\n\n    return this;\n  }\n\n  init() {\n    this.authLoaded = true;\n    this.initReportingService();\n    this.data.$watch(() => this.draw());\n    this.draw();\n  }\n\n  buttonClicked(button) {\n    const data = {\n      uid: this.authService.$getAuth().uid,\n      timestamp: firebase.database.ServerValue.TIMESTAMP,\n      anyclicked: 1\n    };\n    data[button + 'clicked'] = 1;\n\n    // save metrics first to ensure onDataSaved callback\n    // is called after metrics have been calculated\n    this.reportingService.saveMetrics(data).then(() => {\n      this.data.$add(data);\n    });\n  }\n\n  drawMetrics() {\n    this.reportingService.filter().sum('anyclicked').select(1).then((values) => {\n      this.$timeout(() => this.totalClicks = values[0] || 0);\n    });\n    this.reportingService.filter('users').sum('anyclicked').count().then((value) => {\n      this.$timeout(() => this.totalUsers = value || 0);\n    });\n    this.reportingService.filter().last('timestamp').select(1).then((values) => {\n      this.$timeout(() => this.lastClicked = values[0] ? values[0] : null);\n    });\n  }\n\n  draw() {\n    this.drawMetrics();\n    this.drawPieChart();\n    this.drawLineChart('minute');\n    this.drawLineChart('hour');\n    this.drawLineChart('day');\n    this.drawLineChart('week');\n  }\n\n  drawPieChart() {\n    const aClickedQuery = this.reportingService.filter().sum('aclicked').value();\n    const bClickedQuery = this.reportingService.filter().sum('bclicked').value();\n    const cClickedQuery = this.reportingService.filter().sum('cclicked').value();\n    const dClickedQuery = this.reportingService.filter().sum('dclicked').value();\n\n    this.$q.all([aClickedQuery, bClickedQuery, cClickedQuery, dClickedQuery]).then((values) => {\n      this.$timeout(() => {\n        this.piechart.data.rows.splice(0, this.piechart.data.rows.length);\n        this.piechart.data.rows.push({ c: [{ v: 'A' }, {v: values[0] }] });\n        this.piechart.data.rows.push({ c: [{ v: 'B' }, {v: values[1] }] });\n        this.piechart.data.rows.push({ c: [{ v: 'C' }, {v: values[2] }] });\n        this.piechart.data.rows.push({ c: [{ v: 'D' }, {v: values[3] }] });\n      });\n    });\n  }\n\n  drawLineChart(during) {\n    const queryStartTime = new Date();\n    const queryEndTime = new Date();\n    queryStartTime.setMilliseconds(0);\n    queryStartTime.setSeconds(0);\n    queryStartTime.setMinutes(0);\n\n    switch (during) {\n      case 'minute':\n        queryEndTime.setTime(queryStartTime.getTime());\n        queryEndTime.setHours(queryStartTime.getHours() + 1);\n        break;\n      case 'hour':\n        queryStartTime.setHours(0);\n        queryEndTime.setTime(queryStartTime.getTime());\n        queryEndTime.setDate(queryStartTime.getDate() + 1);\n        break;\n      case 'day':\n        queryStartTime.setHours(0);\n        queryStartTime.setDate(1);\n        queryEndTime.setTime(queryStartTime.getTime());\n        queryEndTime.setMonth(queryStartTime.getMonth() + 1);\n        break;\n      case 'week':\n        queryStartTime.setHours(0);\n        queryStartTime.setDate(1);\n        queryStartTime.setMonth(1);\n        queryEndTime.setTime(queryStartTime.getTime());\n        queryEndTime.setFullYear(queryStartTime.getFullYear() + 1);\n        break;\n    }\n\n    const aClickedQuery = this.reportingService.filter().sum('aclicked').during(during).range(queryStartTime.getTime(), queryEndTime.getTime()).values(true);\n    const bClickedQuery = this.reportingService.filter().sum('bclicked').during(during).range(queryStartTime.getTime(), queryEndTime.getTime()).values(true);\n    const cClickedQuery = this.reportingService.filter().sum('cclicked').during(during).range(queryStartTime.getTime(), queryEndTime.getTime()).values(true);\n    const dClickedQuery = this.reportingService.filter().sum('dclicked').during(during).range(queryStartTime.getTime(), queryEndTime.getTime()).values(true);\n\n    this.$q.all([aClickedQuery, bClickedQuery, cClickedQuery, dClickedQuery]).then((values) => {\n      this.linecharts[during].data.rows.splice(0, this.linecharts[during].data.rows.length);\n      for (var i = 0; i < values[0].length; i++) {\n        this.linecharts[during].data.rows.push({\n          c: [{\n            v: new Date(values[0][i].timestamp)\n          }, {\n            v: values[0][i].value\n          }, {\n            v: values[1][i].value\n          }, {\n            v: values[2][i].value\n          }, {\n            v: values[3][i].value\n          }]\n        });\n      }\n    });\n  }\n\n  initReportingService() {\n    // Add report filter for users\n    this.reportingService.addFilter('users', ['uid']);\n\n    // Metrics for timing\n    this.reportingService.addMetric('timestamp', ['first', 'last']);\n\n    // Metrics for ANY button clicked\n    this.reportingService.addMetric('anyclicked', ['sum']);\n    this.reportingService.enableRetainer('minute', 'anyclicked', ['sum']);\n    this.reportingService.enableRetainer('hour', 'anyclicked', ['sum']);\n    this.reportingService.enableRetainer('day', 'anyclicked', ['sum']);\n    this.reportingService.enableRetainer('week', 'anyclicked', ['sum']);\n\n    // Metrics for A button clicked\n    this.reportingService.addMetric('aclicked', ['sum']);\n    this.reportingService.enableRetainer('minute', 'aclicked', ['sum']);\n    this.reportingService.enableRetainer('hour', 'aclicked', ['sum']);\n    this.reportingService.enableRetainer('day', 'aclicked', ['sum']);\n    this.reportingService.enableRetainer('week', 'aclicked', ['sum']);\n\n    // Metrics for B button clicked\n    this.reportingService.addMetric('bclicked', ['sum']);\n    this.reportingService.enableRetainer('minute', 'bclicked', ['sum']);\n    this.reportingService.enableRetainer('hour', 'bclicked', ['sum']);\n    this.reportingService.enableRetainer('day', 'bclicked', ['sum']);\n    this.reportingService.enableRetainer('week', 'bclicked', ['sum']);\n\n    // Metrics for C button clicked\n    this.reportingService.addMetric('cclicked', ['sum']);\n    this.reportingService.enableRetainer('minute', 'cclicked', ['sum']);\n    this.reportingService.enableRetainer('hour', 'cclicked', ['sum']);\n    this.reportingService.enableRetainer('day', 'cclicked', ['sum']);\n    this.reportingService.enableRetainer('week', 'cclicked', ['sum']);\n\n    // Metrics for D button clicked\n    this.reportingService.addMetric('dclicked', ['sum']);\n    this.reportingService.enableRetainer('minute', 'dclicked', ['sum']);\n    this.reportingService.enableRetainer('hour', 'dclicked', ['sum']);\n    this.reportingService.enableRetainer('day', 'dclicked', ['sum']);\n    this.reportingService.enableRetainer('week', 'dclicked', ['sum']);\n  }\n}\n\nHomeController.$inject = ['$firebaseRef', '$firebaseAuth', '$firebaseArray', '$timeout', '$q'];\n","import HomeController from './home-controller';\n\nexport default angular.module('application.home', ['firebase.database'])\n  .controller('HomeController', HomeController)\n  .name;\n","import './home';\n\nmodule.exports = [\n  'application.home'\n];\n"]}